<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Account Summary</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>
  <body style="margin:0;padding:0;background:#f4f6fb;font-family:Arial,Helvetica,sans-serif;color:#1f2937;">
    <!-- Wrapper -->
    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background:#f4f6fb;">
      <tr>
        <td align="center" style="padding:24px;">
          <!-- Card -->
          <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="600" style="width:600px;max-width:100%;background:#ffffff;border-radius:14px;overflow:hidden;box-shadow:0 6px 24px rgba(31,41,55,.08);">
            <!-- Header -->
            <tr>
              <td style="padding:28px 28px 0 28px;background:linear-gradient(90deg,#f0f7ff,#f9fafb);">
                <table role="presentation" width="100%">
                  <tr>
                    <td align="left" style="vertical-align:middle;">
                      <img src="https://www.storicard.com/_next/static/media/storis_savvi_color.7e286ddd.svg"
                           width="140" alt="Stori" style="display:block;max-width:140px;height:auto" />
                    </td>
                    <td align="right" style="vertical-align:middle;">
                      <span style="display:inline-block;padding:6px 10px;border-radius:999px;background:#eef2ff;color:#4338ca;font-size:12px;font-weight:600;letter-spacing:.2px;">
                        Summary {{ .Now.Format "January 2006" }}
                      </span>
                    </td>
                  </tr>
                </table>
                <h2 style="margin:18px 0 6px 0;font-size:22px;line-height:1.3;color:#111827;">
                  Account summary
                </h2>
                <p style="margin:0 0 20px 0;font-size:14px;color:#6b7280;">
                  {{ .UserEmail }} &nbsp;•&nbsp; Generado: {{ .Now.Format "2006-01-02 15:04" }}
                </p>
              </td>
            </tr>

            <!-- KPIs -->
            <tr>
              <td style="padding:20px 24px 8px 24px;background:#ffffff;">
                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
                  <tr>
                    <!-- Balance -->
                    <td width="33.33%" style="padding:8px;">
                      <table role="presentation" width="100%" style="background:#f9fafb;border:1px solid #eef2f7;border-radius:12px;">
                        <tr>
                          <td style="padding:14px;">
                            <div style="font-size:12px;color:#6b7280;margin-bottom:6px;">Total balance</div>
                            <div style="font-size:20px;font-weight:700;color:#111827;">
                              ${{ printf "%.2f" .BalanceTotal }}
                            </div>
                          </td>
                        </tr>
                      </table>
                    </td>
                    <!-- Avg Débito -->
                    <td width="33.33%" style="padding:8px;">
                      <table role="presentation" width="100%" style="background:#f9fafb;border:1px solid #eef2f7;border-radius:12px;">
                        <tr>
                          <td style="padding:14px;">
                            <div style="font-size:12px;color:#6b7280;margin-bottom:6px;">Debit average</div>
                            <div style="font-size:20px;font-weight:700;color:#b91c1c;">
                              ${{ printf "%.2f" .AvgDebit }}
                            </div>
                          </td>
                        </tr>
                      </table>
                    </td>
                    <!-- Avg Crédito -->
                    <td width="33.33%" style="padding:8px;">
                      <table role="presentation" width="100%" style="background:#f9fafb;border:1px solid #eef2f7;border-radius:12px;">
                        <tr>
                          <td style="padding:14px;">
                            <div style="font-size:12px;color:#6b7280;margin-bottom:6px;">Credit average</div>
                            <div style="font-size:20px;font-weight:700;color:#065f46;">
                              ${{ printf "%.2f" .AvgCredit }}
                            </div>
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>

            <!-- Divider -->
            <tr>
              <td style="padding:0 24px;">
                <hr style="border:none;border-top:1px solid #eef2f7;margin:4px 0 8px 0;" />
              </td>
            </tr>

            <!-- Transacciones por mes -->
            <tr>
              <td style="padding:4px 24px 24px 24px;">
                <h3 style="margin:12px 0 12px 0;font-size:16px;color:#111827;">Monthly transactions</h3>
                <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0" style="border-collapse:separate;border-spacing:0;width:100%;border:1px solid #eef2f7;border-radius:10px;overflow:hidden;">
                  <tr style="background:#f3f4f6;">
                    <th align="left" style="padding:10px 12px;font-size:12px;color:#374151;text-transform:uppercase;letter-spacing:.4px;">Month</th>
                    <th align="right" style="padding:10px 12px;font-size:12px;color:#374151;text-transform:uppercase;letter-spacing:.4px;"># Transactions</th>
                  </tr>
                  {{ range .ByMonth }}
                  <tr>
                    <td style="padding:10px 12px;font-size:14px;color:#111827;border-top:1px solid #eef2f7;">{{ .MonthName }}</td>
                    <td align="right" style="padding:10px 12px;font-size:14px;color:#111827;border-top:1px solid #eef2f7;">{{ .Count }}</td>
                  </tr>
                  {{ else }}
                  <tr>
                    <td colspan="2" align="center" style="padding:16px;font-size:14px;color:#6b7280;border-top:1px solid #eef2f7;">No hay transacciones</td>
                  </tr>
                  {{ end }}
                </table>

                <!-- Hint opcional -->
                <p style="margin:12px 4px 0 4px;font-size:12px;color:#6b7280;">
                  Tip: if you can not see a month, it means there were no transactions in that month.
                </p>
              </td>
            </tr>

            <!-- Footer -->
            <tr>
              <td style="padding:16px 24px 24px 24px;background:#ffffff;">
                <p style="margin:0;font-size:12px;color:#9ca3af;line-height:1.5;">
                  This report was generated automatically by Vasenti.
                </p>
              </td>
            </tr>
          </table>
          <!-- /Card -->
        </td>
      </tr>
    </table>
  </body>
</html>

